let g:NIXOS=0
if filereadable("/etc/os-release")
  for line in readfile("/etc/os-release")
    if line =~ 'ID=nixos' | let g:NIXOS=1 | endif
   endfor
endif

if filereadable(expand("~/.vim/autoload/plug.vim")) && !g:NIXOS
  runtime! autoload/plug.vim
  call plug#begin()
    Plug 'https://github.com/vim-airline/vim-airline.git'
    Plug 'https://github.com/vim-airline/vim-airline-themes.git'
    Plug 'https://github.com/edkolev/tmuxline.vim.git'
    Plug 'https://github.com/tpope/vim-surround.git'
    Plug 'https://github.com/luochen1990/rainbow.git'
    Plug 'https://github.com/vim-scripts/YankRing.vim.git'
    Plug 'https://github.com/arcticicestudio/nord-vim.git'
  call plug#end()
endif

" Plugin prefs
" Airline 
let g:airline#extensions#tabline#enabled = 1
let g:airline_powerline_fonts=1
let g:airline_theme='nord'
" Tmuxline
let g:tmuxline_powerline_separators = 1
" RainBow
let g:rainbow_active = 1

" My sensible prefs
set nocompatible
set noerrorbells visualbell t_vb=
set number
if exists('+relativenumber')
  set relativenumber
  :augroup numbertoggle
  :  autocmd!
  :  autocmd BufEnter,FocusGained,InsertLeave * set relativenumber
  :  autocmd BufLeave,FocusLost,InsertEnter   * set norelativenumber
  :augroup END
endif
set nowrap
set wildmenu
" set clipboard=unamedplus
set et ts=2 sts=2 sw=2
set encoding=UTF-8
set ruler
set rulerformat=%-14.(%l,%c%V%)\ %P
set noshowmode
set smartindent

" Search option
set hlsearch
set ignorecase
set smartcase
set showmatch

" Appearance
set t_Co=256
colorscheme nord
set statusline+=%#warningmsg#
set statusline+=%*

" Shortcut
nnoremap  <silent> <tab>    :if &modifiable && !&readonly && &modified <CR> :write<CR> :endif<CR>:bnext<CR>
nnoremap  <silent> <s-tab>  :if &modifiable && !&readonly && &modified <CR> :write<CR> :endif<CR>:bprevious<CR>
nnoremap  <silent> <CR>     :nohlsearch<CR>
